variables:
  GIT_CLEAN_FLAGS: -fxd
stages:
  - analyze
  - test
  - ios
  - reports

analyzer:
  stage: analyze
  before_script:
    - screencapture buildmachine.jpg
    - fvm use 3.3.2
    - pwd
    - vim --version
    - date
  script:
    - git clean $GIT_CLEAN_FLAGS
    - time
    - echo "Analyzing something here..."
    - sleep 10
    - echo "Analyzing done!"
    - mkdir gago
    - touch gago/info.txt
  artifacts:
    untracked: false
    expire_in: 1 days
    paths:
      - gago/
  tags:
    - "dev"
lolomo:
  stage: test
  script:
    - fvm flutter analyze
    - test -f "gago/info.txt"
    - time
  tags:
    - "dev"
ios:
  stage: ios
  script:
    - open -a Simulator.app
    - fvm flutter run
  tags:
    - "devx"
reports:
  stage: reports
  script:
    - screencapture scr.jpg
  artifacts:
    untracked: false
    expire_in: 2 days
    paths:
      - scr.jpg

